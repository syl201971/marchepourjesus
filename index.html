<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marche Chrétienne pour Jésus - Baie-Comeau 2025</title>
    <meta name="description" content="Unissez-vous pour une marche silencieuse en prière pour Jésus à Baie-Comeau le 15 novembre 2025. De Tadoussac à Havre-Saint-Pierre, rejoignez-nous !">
    <style>
        /* Styles généraux */
        body { font-family: 'Arial', sans-serif; margin: 0; padding: 0; background-color: #f4f4f4; color: #333; line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        header { background: linear-gradient(to right, #8B0000, #DC143C); color: white; text-align: center; padding: 20px; }
        h1 { margin: 0; font-size: 2.5em; }
        .hero { text-align: center; padding: 40px 20px; background: #fff; }
        .hero img { max-width: 100%; height: auto; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .event-details { background: #e9ecef; padding: 20px; border-radius: 10px; margin: 20px 0; }
        .qr-section { text-align: center; margin: 40px 0; }
        .qr-code { width: 200px; height: 200px; background: #ddd; border: 2px dashed #ccc; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 0.8em; color: #666; }
        .itinerary { background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .map { height: 400px; margin: 20px 0; border-radius: 10px; overflow: hidden; }
        footer { background: #333; color: white; text-align: center; padding: 20px; }
        .countdown { font-size: 1.5em; color: #DC143C; font-weight: bold; }
        
        /* Responsive : Mobile */
        @media (max-width: 768px) {
            h1 { font-size: 2em; }
            .hero { padding: 20px 10px; }
            .event-details { padding: 15px; }
            .map { height: 300px; }
            .qr-code { width: 150px; height: 150px; font-size: 0.7em; }
        }
        
        /* Desktop */
        @media (min-width: 769px) {
            .container { padding: 40px; }
            h1 { font-size: 3em; }
        }
    </style>
<script type="module">
  // Import du SDK Firebase (version modulaire)
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js';
  import { getFirestore, doc, updateDoc, increment, getDoc, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-firestore.js';
  import { getAuth, signInAnonymously } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js';

  // Colle ton firebaseConfig ici (de l'étape 3)
  const firebaseConfig = {
     apiKey: "AIzaSyAcxVNsIt4YsrrvhfyQWvZypHym0Cv3z8A",
    authDomain: "marche-pour-jesus.firebaseapp.com",
    projectId: "marche-pour-jesus",
    storageBucket: "marche-pour-jesus.firebasestorage.app",
    messagingSenderId: "915519833949",
    appId: "1:915519833949:web:c3f2cddd593a37bf31cab4",
    measurementId: "G-CWM522GSPR" };

  // Initialisation
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const auth = getAuth(app);

  // Variables globales
  let hasClicked = localStorage.getItem('hasClickedThisSession') || false;
  let unsubscribe; // Pour le listener en temps réel

  // Fonction d'authentification anonyme
  signInAnonymously(auth).catch((error) => console.error('Erreur auth:', error));

  // Écoute en temps réel du compteur
  const counterRef = doc(db, 'counters', 'participants');
  unsubscribe = onSnapshot(counterRef, (docSnap) => {
    if (docSnap.exists()) {
      const count = docSnap.data().count || 0;
      document.getElementById('compteur-participants').innerHTML = count + ' participant' + (count !== 1 ? 's' : '') + ' inscrit' + (count !== 1 ? 's' : '') + ' ! Rejoignez-nous !';
    }
  });

  // Fonction pour incrémenter
  window.incrementParticipant = function() {
    if (!hasClicked) {
      updateDoc(counterRef, { count: increment(1) })
        .then(() => {
          localStorage.setItem('hasClickedThisSession', 'true');
          hasClicked = true;
          alert('Merci de votre inscription ! Un seul clic par session est autorisé.');
        })
        .catch((error) => {
          console.error('Erreur incrément:', error);
          alert('Erreur : Réessayez plus tard.');
        });
    } else {
      alert('Vous avez déjà cliqué dans cette session. Rejoignez-nous le 15 novembre !');
    }
  };

  // Réinitialisation à la fermeture
  window.onbeforeunload = function() {
    localStorage.removeItem('hasClickedThisSession');
    if (unsubscribe) unsubscribe();
  };
</script>


</head>
<body>
    <header>
        <h1>Marche Chrétienne pour Jésus</h1>
        <p>Baie-Comeau, 15 novembre 2025 - Unissons nos cœurs en prière silencieuse</p>
    </header>

    <div class="container">
        <section class="hero">
           <img src="https://syl201971.github.io/marchepourjesus/images/grok-image-e29b0bc2-18bd-4d72-bced-7589803053d7.png" alt="Jésus avec un regard triomphant, couronne d'épines" width="800" height="600">
            <div class="event-details">
                <h2>Rejoignez-nous pour unir les chrétiens de la Côte-Nord !</h2>
                <p><strong>Date :</strong> 15 novembre 2025</p>
                <p><strong>Heure :</strong> 13h (Durée : ~1-2h)</p>
                <p><strong>Lieu de départ :</strong> Fontaine à Place Lasalle, centre-ville de Baie-Comeau</p>
                <p>De Tadoussac à Havre-Saint-Pierre : Venez marcher en silence, en prière pour Jésus, notre Sauveur. Une marche pour la foi, l'unité et la victoire en Christ !</p>
                <div class="countdown" id="countdown"></div>
            </div>
        </section>

        <section class="qr-section">
            <h2>Confirmez votre présence</h2>
            <p>Scannez ce QR code pour vous inscrire et recevoir des mises à jour. Le même code est sur nos affiches locales.</p>
            <div class="qr-code">QR Code Placeholder<br>(Générez via QRCode Monkey : lien vers formulaire d'inscription)</div>
            <a href="https://forms.gle/placeholder-form" target="_blank" style="background: #DC143C; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">S'inscrire maintenant</a>
        </section>

        <section class="itinerary">
            <h2>Itinéraire de la Marche Silencieuse</h2>
            <ol>
                <li><strong>Départ :</strong> Fontaine à Place Lasalle (centre-ville)</li>
                <li><strong>Direction :</strong> Parc des Pionniers (sentiers le long du fleuve Saint-Laurent)</li>
                <li><strong>Arrivée :</strong> Quai de Baie-Comeau (marina et vue sur le fleuve)</li>
                <li><strong>Retour :</strong> Même itinéraire vers Place Lasalle (prière finale collective)</li>
            </ol>
            <p><strong>Distance totale :</strong> ~3-4 km (facile, accessible à tous). Apportez de l'eau et des chaussures confortables.</p>
            <iframe class="map" src="https://www.google.com/maps/embed?pb=!1m28!1m12!1m3!1d8853.123456789!2d-68.1518!3d49.2212!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zNDLCsDEzJzMy.4yJOUDGsOMDkwJzI2LjQiTQ!3m2!1i1024!2i768!4f13.1!4m13!3e2!4m5!1s0x4b5e5e5e5e5e5e5e%3A0x1234567890abcdef!2sPlace+Lasalle%2C+Baie-Comeau!3m2!1d49.2212!2d-68.1518!4m5!1s0x4b5e5e5e5e5e5e5e%3A0xabcdef1234567890!2sParc+des+Pionniers%2C+Baie-Comeau!3m2!1d49.215!2d-68.160!4m5!1s0x4b5e5e5e5e5e5e5e%3A0xfedcba0987654321!2sQuai+de+Baie-Comeau!3m2!1d49.210!2d-68.165!5e1!3m2!1sfr!2sca!4v1727020000000" allowfullscreen="" loading="lazy"></iframe>
        </section>

        <section class="event-details">
            <h2>Pourquoi cette Marche ?</h2>
            <p>Dans un monde divisé, unissons-nous comme un seul corps en Christ (1 Corinthiens 12:12). Cette marche silencieuse est un acte de foi, de repentance et de célébration de la victoire de Jésus sur la croix. Ouverte à tous les chrétiens : catholiques, évangéliques, etc.</p>
            <p><strong>Contact :</strong> marchepourjesus@baiecomeau.ca | 418-XXX-XXXX</p>
        </section>
    </div>

    <footer>
        <p>&copy; 2025 Marche Chrétienne Baie-Comeau. Gloire à Dieu ! <a href="#" style="color: #ccc;">Partager sur Facebook</a> | <a href="#" style="color: #ccc;">Instagram</a></p>
    </footer>

    <script>
        // Compteur en temps réel jusqu'au 15 nov 2025 à 13h
        function countdown() {
            const eventDate = new Date('2025-11-15T13:00:00').getTime();
            const now = new Date().getTime();
            const distance = eventDate - now;
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            document.getElementById('countdown').innerHTML = `${days}j ${hours}h ${minutes}min jusqu'à l'événement`;
            if (distance < 0) document.getElementById('countdown').innerHTML = 'L\'événement commence maintenant !';
        }
        setInterval(countdown, 60000); // Mise à jour toutes les minutes
        countdown(); // Appel initial
    </script>
</body>
</html>
